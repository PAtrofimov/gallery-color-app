{"version":3,"sources":["api/StorageService.js","middleware/localStorageMiddleware.js","store/reducers/color/action-types.js","store/reducers/color/index.js","store/reducers/user/action-types.js","store/reducers/user/index.js","store/reducers/index.js","store/index.js","components/Header.js","components/LeftMenu.js","layouts/Main.js","api/ColorService.js","store/reducers/color/action-creators.js","store/reducers/user/action-creators.js","store/reducers/action-creators.js","hooks/index.js","pages/AddColor.js","utils/index.js","selectors/index.js","components/Rating.js","components/Star.js","components/Stars.js","pages/Color.js","pages/Colors.js","pages/UpdateColor.js","routes/index.js","components/AppRouter.js","App.js","index.js"],"names":["storageName","StorageService","JSON","parse","sessionStorage","getItem","state","setItem","stringify","localStorageMiddleware","getState","next","action","result","set","console","log","SET_COLORS","SET_ISLOADING","SET_ERROR","ADD_COLOR","EDIT_COLOR","REMOVE_COLOR","SET_RATING","initialState","colors","isLoading","error","SET_ADMIN","isAdmin","color","type","payload","id","Date","now","text","description","rate","rating","newColors","filter","ratings","user","rootReducer","combineReducers","reducers","store","createStore","applyMiddleware","thunk","Header","className","href","LeftMenu","hidden","htmlFor","to","activeClassName","Main","children","ColorService","axios","get","ColorActionCreators","setColors","setError","setIsLoading","addColor","editColor","removeColor","setRating","fetchColors","dispatch","a","response","data","message","UserActionCreators","setIsAdmin","allActionCreators","useActions","useDispatch","bindActionCreators","name","AddColor","useState","setState","router","useHistory","onChangeState","target","value","prev","onSubmit","e","preventDefault","placeholder","onChange","rows","onClick","push","RouteNames","COLORS","averageFromArray","array","averageRating","length","reduce","cur","generateArrayAndReverse","number","Array","fill","map","_","index","reverse","selectColors","state2","selectColorById","createSelector","colorId","find","selectIdColors","selectColorWithAverageRatingById","Rating","React","Children","count","caption","Star","disabled","onChangeParent","title","defaultProps","Stars","classNames","Color","useSelector","COLORADMIN","COLOR","style","background","stopPropagation","Colors","useEffect","role","UpdateColor","search","useLocation","useMemo","URLSearchParams","useQuery","savedState","onChangeRating","window","confirm","hide","ADDCOLOR","UpdateColorWithMain","publicRoutes","path","render","exact","AppRouter","route","key","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.5539dfb8.chunk.js","sourcesContent":["const storageName = \"galleryState\";\r\n\r\nexport default class StorageService {\r\n  static get() {\r\n    return JSON.parse(sessionStorage.getItem(storageName));\r\n  }\r\n  static set(state) {\r\n   sessionStorage.setItem(storageName, JSON.stringify(state));\r\n  }\r\n}\r\n","import StorageService from \"../api/StorageService\";\r\n\r\nconst localStorageMiddleware = ({ getState }) => {\r\n  return (next) => (action) => {\r\n    const result = next(action);\r\n    StorageService.set(getState());\r\n    console.log({state: getState()});\r\n    return result;\r\n  };\r\n};\r\nexport default localStorageMiddleware;\r\n","export const SET_COLORS = \"SET_COLORS\";\r\nexport const SET_ISLOADING = \"SET_ISLOADING\";\r\nexport const SET_ERROR = \"SET_ERROR\";\r\nexport const ADD_COLOR = \"ADD_COLOR\";\r\nexport const EDIT_COLOR = \"EDIT_COLOR\";\r\nexport const REMOVE_COLOR = \"REMOVE_COLOR\";\r\nexport const SET_RATING = \"SET_RATING\";\r\n","import {\r\n  SET_COLORS,\r\n  ADD_COLOR,\r\n  EDIT_COLOR,\r\n  REMOVE_COLOR,\r\n  SET_RATING,\r\n  SET_ISLOADING,\r\n  SET_ERROR,\r\n} from \"./action-types\";\r\n\r\nconst initialState = {\r\n  colors: [],\r\n  isLoading: false,\r\n  error: \"\",\r\n};\r\n\r\nexport default function colorReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case SET_COLORS:\r\n      return { ...state, colors: action.payload };\r\n    case SET_ISLOADING:\r\n      return { ...state, isLoading: action.payload };\r\n    case SET_ERROR:\r\n      return { ...state, error: action.payload, isLoading: false };\r\n    case ADD_COLOR:\r\n      return {\r\n        ...state,\r\n        colors: [...state.colors, { ...action.payload, id: Date.now() }],\r\n      };\r\n    case EDIT_COLOR: {\r\n      const { id, text, description, rate } = action.payload;\r\n      const rating = rate ? [...state.colors.rating, rate] :state.colors.rating;\r\n      \r\n      const newColors = state.colors.filter((color) => {\r\n        if (color.id === id) {\r\n          return { ...color, text, description, rating};\r\n        }\r\n\r\n        return color;\r\n      });\r\n\r\n      return { ...state, colors: newColors };\r\n    }\r\n    case REMOVE_COLOR: {\r\n      const { id } = action.payload;\r\n      return {\r\n        ...state,\r\n        colors: state.colors.filter((color) => color.id !== id),\r\n      };\r\n    }\r\n    case SET_RATING: {\r\n      const { id, rate } = action.payload;\r\n      const newColors = state.colors.filter((color) => {\r\n        if (color.id === id) {\r\n          return { ...color, rating: [...this.state.ratings, rate] };\r\n        }\r\n\r\n        return color;\r\n      });\r\n\r\n      return { ...state, colors: newColors };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export const SET_ADMIN = \"SET_ADMIN\";","import { SET_ADMIN } from './action-types';\r\n\r\nconst initialState = {\r\n   isAdmin: false\r\n}\r\n\r\nexport default function userReducer(state = initialState, action) {\r\n\r\n   switch (action.type) {\r\n      case SET_ADMIN:\r\n         return { ...state, isAdmin: action.payload };\r\n      default:\r\n         return state;\r\n   }\r\n\r\n}\r\n","import color from \"./color\";\r\nimport user from \"./user\";\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {\r\n   color,\r\n   user,\r\n}","import {createStore, combineReducers, applyMiddleware} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport localStorageMiddleware from '../middleware/localStorageMiddleware';\r\nimport reducers from './reducers'\r\n\r\nconst rootReducer = combineReducers(reducers)\r\n\r\nexport const store = createStore(rootReducer, applyMiddleware(thunk, localStorageMiddleware))","import React from \"react\";\r\n\r\nconst Header = () => {\r\n  return (\r\n    <header className=\"header\">\r\n      <h1 className=\"header__title\">\r\n        <a href=\"/\" className=\"header__logo\">\r\n          Colors Gallery\r\n        </a>\r\n      </h1>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst LeftMenu = () => {\r\n  return (\r\n    <>\r\n      <input type=\"checkbox\" id=\"nav-toggle\" hidden />\r\n      <nav className=\"nav\">\r\n        <label htmlFor=\"nav-toggle\" className=\"nav-toggle\"></label>\r\n        <h2>Menu</h2>\r\n        <ul>\r\n          <li>\r\n            <NavLink to=\"/\" activeClassName=\"active\">\r\n              Colors list\r\n            </NavLink>\r\n          </li>\r\n          <li>\r\n            <NavLink to=\"/add\" activeClassName=\"active\">\r\n              Add color\r\n            </NavLink>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LeftMenu;\r\n","import React from \"react\";\r\nimport Header from \"../components/Header\";\r\nimport LeftMenu from \"../components/LeftMenu\";\r\n\r\nconst Main = ({ children }) => {\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div>\r\n        <LeftMenu />\r\n        {children}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import axios from \"axios\";\r\n\r\nexport default class ColorService {\r\n   static async get() {\r\n      return await axios.get('./colors.json');\r\n   }\r\n}","import ColorService from \"../../../api/ColorService\";\r\nimport StorageService from \"../../../api/StorageService\";\r\nimport {\r\n  ADD_COLOR,\r\n  EDIT_COLOR,\r\n  REMOVE_COLOR,\r\n  SET_COLORS,\r\n  SET_ERROR,\r\n  SET_ISLOADING,\r\n  SET_RATING,\r\n} from \"./action-types\";\r\n\r\nexport const ColorActionCreators = {\r\n  setColors: (colors) => ({ type: SET_COLORS, payload: colors }),\r\n  setError: (error) => ({ type: SET_ERROR, payload: error }),\r\n  setIsLoading: (isLoading) => ({ type: SET_ISLOADING, payload: isLoading }),\r\n  addColor: (color) => ({ type: ADD_COLOR, payload: color }),\r\n  editColor: (color) => ({ type: EDIT_COLOR, payload: color }),\r\n  removeColor: (id) => ({ type: REMOVE_COLOR, payload: id }),\r\n  setRating: (color) => ({ type: SET_RATING, payload: color }),\r\n  fetchColors: () => async (dispatch) => {\r\n    try {\r\n      dispatch(ColorActionCreators.setIsLoading(true));\r\n      let state = StorageService.get();\r\n      let colors;\r\n      // if (state) {\r\n      //   colors = state?.color?.colors;\r\n      // } else {\r\n      const response = await ColorService.get();\r\n      colors = response.data;\r\n      console.log(\"color\", { colors });\r\n      // }\r\n\r\n      dispatch(ColorActionCreators.setColors(colors));\r\n    } catch (error) {\r\n      dispatch(ColorActionCreators.setError(error.message));\r\n    } finally {\r\n      dispatch(ColorActionCreators.setIsLoading(false));\r\n    }\r\n  },\r\n};\r\n","import { SET_ADMIN } from \"./action-types\";\r\n\r\nexport const UserActionCreators = {\r\n   setIsAdmin: (isAdmin) => ({ type: SET_ADMIN, payload: isAdmin }),\r\n }","import { ColorActionCreators } from \"./color/action-creators\";\r\nimport { UserActionCreators } from \"./user/action-creators\";\r\n\r\nexport const allActionCreators = {\r\n   ...ColorActionCreators,\r\n   ...UserActionCreators,\r\n}","import { useMemo } from \"react\";\r\nimport { useLocation } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport { useDispatch } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { allActionCreators } from '../store/reducers/action-creators';\r\n\r\nexport function useQuery() {\r\n  const { search } = useLocation();\r\n  return useMemo(() => new URLSearchParams(search), [search]);\r\n}\r\n\r\nexport const useActions = () => {\r\n   const dispatch = useDispatch();\r\n   return bindActionCreators(allActionCreators, dispatch);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useActions } from \"../hooks\";\r\nimport { RouteNames } from \"../routes\";\r\n\r\nconst initialState = { name: \"\", description: \"\", color: \"\" };\r\n\r\nconst AddColor = () => {\r\n  const [state, setState] = useState(initialState);\r\n  const router = useHistory();\r\n  const { addColor } = useActions();\r\n\r\n  const onChangeState = ({ target: { name, value } }) => {\r\n    setState((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    addColor(state);\r\n    setState(initialState);\r\n  };\r\n\r\n  const handleClose = (e) => {\r\n    router.push(RouteNames.COLORS);\r\n  };\r\n\r\n  return (\r\n    <form\r\n      className=\"gallery-create gallery-create__container\"\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"form-line\">\r\n        <span>Name:</span>\r\n        <input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          className=\"form-input\"\r\n          placeholder=\"Name\"\r\n          value={state.name}\r\n          onChange={onChangeState}\r\n        />\r\n      </label>\r\n      <div className=\"form-line\">\r\n        <span>Description:</span>\r\n        <textarea\r\n          name=\"description\"\r\n          className=\"form-input\"\r\n          rows=\"10\"\r\n          placeholder=\"Description\"\r\n          value={state.description}\r\n          onChange={onChangeState}\r\n        ></textarea>\r\n      </div>\r\n      <label className=\"form-line\">\r\n        <span>Choose color:</span>\r\n        <input\r\n          type=\"color\"\r\n          name=\"color\"\r\n          className=\"form-input\"\r\n          value={state.color}\r\n          onChange={onChangeState}\r\n        />\r\n      </label>\r\n\r\n      <div className=\"items__actions\">\r\n        <button type=\"submit\">Add</button>\r\n        <button onClick={handleClose}>Close</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default AddColor;\r\n","export function averageFromArray(array) {\r\n  const length = array?.length;\r\n  let averageRating = 0;\r\n  if (length) {\r\n    averageRating = array.reduce((prev, cur) => prev + cur);\r\n  }\r\n  return averageRating;\r\n}\r\n\r\nexport function generateArrayAndReverse(number) {\r\n  return new Array(number)\r\n    .fill(0)\r\n    .map((_, index) => index + 1)\r\n   .reverse();\r\n}\r\n","import { createSelector } from \"reselect\";\r\nimport { averageFromArray } from \"../utils\";\r\n\r\nconst selectColors = (state) => {\r\n  console.log({ state2: state });\r\n  return state.color.colors;\r\n};\r\nconst selectColorId = (state, colorId) => colorId;\r\n\r\nconst selectColorById = createSelector(\r\n  [selectColors, selectColorId],\r\n  (colors, colorId) => colors.find((color) => color.id === colorId)\r\n);\r\n\r\nconst selectColorsWithAverageRating = createSelector(selectColors, (colors) => {\r\n  return colors.map((color) => {\r\n    const averageRating = averageFromArray(color?.rating);\r\n    return { ...color, averageRating };\r\n  });\r\n});\r\n\r\nconst selectIdColors = createSelector(selectColors, (colors) => {\r\n  console.log({ colors });\r\n  return colors.map((color) => color.id);\r\n});\r\n\r\nconst selectColorWithAverageRatingById = createSelector(\r\n  selectColorById,\r\n  (color) => {\r\n     console.log({color});\r\n    const averageRating = averageFromArray(color?.rating);\r\n    return { ...color, averageRating };\r\n  }\r\n);\r\n\r\nexport {\r\n  selectIdColors,\r\n  selectColorsWithAverageRating,\r\n  selectColorWithAverageRatingById,\r\n};\r\n","import React from \"react\";\r\n\r\nconst Rating = ({ averageRating, children }) => {\r\n  const number = React.Children.count(children);\r\n  const caption = `${averageRating} of ${number} stars`;\r\n\r\n  return (\r\n    <div className=\"item__rating\">\r\n      {children}\r\n      <div className=\"items__stars-value\">{caption}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Rating;\r\n","import React from \"react\";\r\n\r\nconst Star = ({ value, disabled, onChange: onChangeParent }) => {\r\n  const id = `star-${value}`;\r\n  const title = `Rating «${value}»`;\r\n  const onChange = () => {\r\n   onChangeParent(value);\r\n  };\r\n  return (\r\n    <>\r\n      <input\r\n        type=\"radio\"\r\n        id={id}\r\n        name=\"rating\"\r\n        value={value}\r\n        onChange={onChange}\r\n        disabled={disabled}\r\n      />\r\n      <label htmlFor={id} title={title}></label>\r\n    </>\r\n  );\r\n};\r\n\r\nStar.defaultProps = {\r\n  disabled: false,\r\n  onChange: () => {}\r\n};\r\n\r\nexport default Star;\r\n","import classNames from \"classnames\";\r\nimport React from \"react\";\r\n\r\nconst Stars = ({ className, children }) => {\r\n  return (\r\n    <div className={classNames(className, \"stars\")}>\r\n       {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Stars;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport Rating from \"../components/Rating\";\r\nimport Star from \"../components/Star\";\r\nimport Stars from \"../components/Stars\";\r\nimport { RouteNames } from \"../routes\";\r\nimport { selectColorWithAverageRatingById } from \"../selectors\";\r\nimport { generateArrayAndReverse } from \"../utils\";\r\n\r\nconst Color = ({ id }) => {\r\n  const isAdmin = useSelector((state) => state.user.isAdmin);\r\n  const { color, name, averageRating } = useSelector((state) =>\r\n    selectColorWithAverageRatingById(state, id)\r\n  );\r\n  const router = useHistory();\r\n  const onClick = (e) => {\r\n    //e.stopPropagation();\r\n    console.log(\"click\");\r\n    if (isAdmin) {\r\n      router.push(RouteNames.COLORADMIN);\r\n    } else {\r\n      router.push(RouteNames.COLOR);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"gallery__item item\" onClick={onClick}>\r\n      <div className=\"item__name\" style={{ color }}>\r\n        {name}\r\n      </div>\r\n      <div className=\"item__color-block\" style={{ background: color }}></div>\r\n\r\n      <Rating\r\n        averageRating={averageRating}\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n        }}\r\n      >\r\n        <Stars className=\"item__stars\">\r\n          {generateArrayAndReverse(5).map((value) => (\r\n            <Star key={value} value={value} disabled />\r\n          ))}\r\n        </Stars>\r\n      </Rating>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Color;\r\n","import React, { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useActions } from \"../hooks\";\r\nimport { selectIdColors } from \"../selectors\";\r\nimport Color from \"./Color\";\r\n\r\nconst Colors = () => {\r\n  const { fetchColors, setIsAdmin } = useActions();\r\n\r\n  const isAdmin = useSelector((state) => state.user.isAdmin);\r\n  useEffect(() => {\r\n    fetchColors();\r\n  }, []);\r\n  const handleClick = () => {\r\n    setIsAdmin(!isAdmin);\r\n  };\r\n  const colors = useSelector(selectIdColors);\r\n\r\n  return (\r\n    <main role=\"main\">\r\n      <section className=\"gallery\">\r\n        <header className=\"gallery__header\">\r\n          <h2>Colors list</h2>\r\n        </header>\r\n        <div className=\"gallery__row\">\r\n          {colors.map((id) => (\r\n            <Color key={id} id={id} />\r\n          ))}\r\n        </div>\r\n        <button onClick={handleClick}>\r\n          {isAdmin ? \"Try User\" : \"Try Admin\"}\r\n        </button>\r\n      </section>\r\n      |\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Colors;\r\n","import classNames from \"classnames\";\r\nimport React, { useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Rating from \"../components/Rating\";\r\nimport Star from \"../components/Star\";\r\nimport Stars from \"../components/Stars\";\r\nimport { useActions, useQuery } from \"../hooks\";\r\nimport { RouteNames } from \"../routes\";\r\nimport { selectColorWithAverageRatingById } from \"../selectors\";\r\nimport { generateArrayAndReverse } from \"../utils\";\r\n\r\nconst initialState = { name: \"\", description: \"\", color: \"\", rate: \"\" };\r\n\r\nconst UpdateColor = ({ id }) => {\r\n  const query = useQuery();\r\n  const isAdmin = query.get(\"role\") === \"admin\";\r\n\r\n  const savedState = useSelector((state) =>\r\n    selectColorWithAverageRatingById(state, id)\r\n  );\r\n\r\n  const [state, setState] = useState({ ...initialState, ...savedState });\r\n  const router = useHistory();\r\n  const { editColor, removeColor } = useActions();\r\n\r\n  const onChangeState = ({ target: { name, value } }) => {\r\n    setState((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const onChangeRating = (value) => {\r\n    console.log(value);\r\n    setState((prev) => ({ ...prev, rate: [value] }));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    editColor(state);\r\n  };\r\n\r\n  const handleClose = (e) => {\r\n    router.push(RouteNames.COLORS);\r\n  };\r\n\r\n  const handleDelete = (e) => {\r\n    const replyYes = window.confirm(\"The color will be removed. Continue ?\");\r\n    if (replyYes) {\r\n      removeColor(id);\r\n    }\r\n    router.push(RouteNames.COLORS);\r\n  };\r\n\r\n  return (\r\n    <form\r\n      className=\"gallery-create gallery-create__container\"\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"form-line\">\r\n        <span>Name:</span>\r\n        <input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          className=\"form-input\"\r\n          placeholder=\"Name\"\r\n          value={state.name}\r\n          onChange={onChangeState}\r\n        />\r\n      </label>\r\n      <div className=\"form-line\">\r\n        <span>Description:</span>\r\n        <textarea\r\n          name=\"description\"\r\n          className=\"form-input\"\r\n          rows=\"10\"\r\n          placeholder=\"Description\"\r\n          value={state.description}\r\n          onChange={onChangeState}\r\n        ></textarea>\r\n      </div>\r\n      <label className=\"form-line\">\r\n        <span>Choose color:</span>\r\n        <input\r\n          type=\"color\"\r\n          name=\"color\"\r\n          className=\"form-input\"\r\n          value={state.color}\r\n          onChange={onChangeState}\r\n        />\r\n      </label>\r\n      <Rating\r\n        averageRating={state.averageRating}\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n        }}\r\n      >\r\n        <Stars className=\"item__stars\">\r\n          {generateArrayAndReverse(5).map((value) => (\r\n            <Star key = {value} value={value} onChange={onChangeRating} disabled={isAdmin} />\r\n          ))}\r\n        </Stars>\r\n      </Rating>\r\n\r\n      <div className=\"items__actions\">\r\n        <button type=\"submit\">Save</button>\r\n        <button\r\n          onClick={handleDelete}\r\n          className={classNames({ hide: !isAdmin })}\r\n        >\r\n          Delete\r\n        </button>\r\n        <button onClick={handleClose}>Close</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default UpdateColor;\r\n","import Main from \"../layouts/Main\";\r\nimport AddColor from \"../pages/AddColor\";\r\nimport Colors from \"../pages/Colors\";\r\nimport Error from \"../pages/Error\";\r\nimport UpdateColor from \"../pages/UpdateColor\";\r\n\r\nexport const RouteNames = {\r\n  COLORADMIN: \"/color/:id?role=admin\",\r\n  COLOR: \"/color/:id\",\r\n  COLORS: \"/\",\r\n  ADDCOLOR: \"/add\",\r\n};\r\n\r\nconst ColorsWithMain = () => (\r\n  <Main>\r\n    <Colors />\r\n  </Main>\r\n);\r\nconst UpdateColorWithMain = () => (\r\n  <Main>\r\n    <UpdateColor />\r\n  </Main>\r\n);\r\nconst ErrorWithMain = () => (\r\n  <Main>\r\n    <Error />\r\n  </Main>\r\n);\r\n\r\nconst AddColorWithMain = () => (\r\n   <Main>\r\n     <AddColor />\r\n   </Main>\r\n );\r\n\r\nexport const publicRoutes = [\r\n  { path: RouteNames.COLORS, render: ColorsWithMain, exact: true },\r\n  { path: RouteNames.COLOR, render: UpdateColorWithMain, exact: true },\r\n  { path: RouteNames.COLORADMIN, render: UpdateColorWithMain, exact: true },\r\n  { path: RouteNames.ADDCOLOR, render: AddColorWithMain, exact: true },\r\n//   { render: ErrorWithMain, exact: true },\r\n];\r\n\r\nexport const privateRoutes = [];\r\n","import { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport React from \"react\";\r\nimport { publicRoutes, RouteNames } from \"../routes\";\r\n\r\nconst AppRouter = () => {\r\n  return (\r\n    <Switch>\r\n      {publicRoutes.map((route) => (\r\n        <Route {...route} key={route.path} />\r\n      ))}\r\n      <Redirect to={RouteNames.COLORS} />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default AppRouter;\r\n","import React from 'react';\nimport './App.css';\nimport AppRouter from './components/AppRouter';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n         <AppRouter />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport {store} from './store';\nimport App from \"./App\";\n\nReactDOM.render(\n<Provider store={store}>\n   <BrowserRouter>\n      <App />\n   </BrowserRouter>\n</Provider>,\n   document.getElementById(\"root\"));"],"sourceRoot":""}